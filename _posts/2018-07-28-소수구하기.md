---
layout: post
title:  "소수구하기(에라토스테네스의 체)"
date:   2018-07-29 14:55:00 +0900
categories: 알고리즘
---
### 소수구하기(에라토스테네스의 체)

백준에 있는 소수구하기 문제를 간단하게 구현했다. 하지만, 다른 사람들의 코드 실행 속도는 훨씬 짧았다. 다른 방법이 있는 걸까? 있다.. 에라토스테네스의 체라는 방법으로 구현하는 것이다. 기존에 사용한 방법과 효율적인 방법을 같이 설명하겠다.

#### 먼저, 기존에 내가 짠 코드

```java
	//num이 소수인지 반환하는 메소드
	private boolean isPrime(int num) {
		if(num==1) {
			return false;
		}
		for(int i=2;i<num;i++) {
			if(num%i==0) {
				return false;
			}
		}
		return true;
	}
```

소수는 1과 본인만이 약수인 것을 뜻하기에, 말 그대로 구현한 것이다. 

코드에 문제는 없으나, 만약 1부터 10000까지의 소수를 모두 구하라는 문제가 있을 때, 10000번의 반복을 수행해야하므로 비효율적이다.



N까지의 소수를 검사할 때 효율적으로 검사하는 방법을 생각해보자. 

#### N의 제곱근까지만 검사하기

수가 수를 나누면 몫이 나온다. 이때, 나누는 수와 몫 중 하나는 반드시 N의 제곱근 이하다.



예를 들어, 범위를 좁혀서 144의 약수를 한번 보자.

1, 2, 3, 4, 6, 8, 9, 12, 16, 18, 36, 48, 72, 144이다. 144의 제곱근은 12이다.

144를 만들기 위해서는 제곱근인 12보다 작은 수와 큰 수의 곱으로 이뤄지게 된다. 

약수는 설명을 위해서 보여준 것이고, 자연수가 아닌 다른 두 수를 곱해서 144를 만들 때는 하나의 수는 반드시 제곱근보다 작다. 

그래서, N의 제곱근까지만 검사하면 되는 것이다. 



#### 에라토스테네스의 체

모든 자연수는 소수들의 곱으로 이뤄져있다고 말할 수 있습니다.  

1~N까지의 숫자 중에 2의 배수를 다 거르고, 3의 배수 거르고 5의 배수 거르고.... N의 제곱근까지의 소수들의 배수를 다 거르고 남은 수가 소수가 됩니다.

예를 들어 N이 121일 경우 제곱근인 11이하의 소수(2,3,5,7)의 배수들을 지워주면 소수를 구할 수 있습니다.

```java
	//n이하의 수 소수인지아닌지 저장하는 배열
	private boolean[] getPrimeArray(int n) {
		boolean[] isPrime = new boolean[n+1];
		Arrays.fill(isPrime, true);
		isPrime[0]=isPrime[1]=false;		//0과 1은 소수가 아니다.
		
		int nSqrt = (int) Math.sqrt(n);		//n의 제곱근
		for(int i=2;i<=nSqrt;i++) {
			if(!isPrime[i])	//이미 걸러지면 거치지 않는다.
				continue;
			for(int j=i*2;j<=n;j+=i) {		//i의 배수는 소수가 아니다.	
				isPrime[j] =false;			//i가 2일때, j=2, 4, 6, 8...n
			}
		}
		return isPrime;
	}
```

위 코드는 각 수가 소수인지 아닌지를 배열 형태로 반환하는 메소드다.