---
layout: post
title:  "네트워크 기본 다지기3"
date:   2018-07-02 22:44:00 +0900
categories: 네트워크
---

### TCP/IP구조 2계층을 알아보자!

![2](https://user-images.githubusercontent.com/33653318/42171435-3b9189ce-7e54-11e8-9276-acda4dedd4e4.PNG)


1계층은 컴퓨터와 컴퓨터 사이에 정보를 전달하는 역할을 한다. 2계층은 하나의 망 안에서 데이터 전송하기 위한 규칙을 정합니다. 하나의 망 내에서 원하는 컴퓨터에게 정보를 전송하는 것을 2계층에서 고려합니다.


![2](https://user-images.githubusercontent.com/33653318/42171444-44223840-7e54-11e8-93ab-33395a5a9e70.png)

위 그림처럼 작은 규모의 망인 경우도 있고, 어마어마한 컴퓨터 수를 포함한 큰 규모의 망도 있을 것입니다. 작은 규모의 망을 LAN(Local Area Network)라고 부르고, 큰 규모의 망을 WAN(World Area Network)라고 부릅니다. 

둘의 차이는 LAN은 개인이 아무나 임의로 구축해서 사용할 수 있으며 그 책임과 설치는 본인이 담당합니다. 회사 내 네트워크나 학교 네트워크는 이렇게 선으로 연결하면 해결되지만, A회사와 B회사의 정보교환 같은 것은 도로를 가로질러 선을 설치해야하며 골칫거리가 많이 생깁니다. 이 번거롭고 거대한 사업을 KT, SK, LG와 같은 ISP(Internet Service Provider, 인터넷 제공업체)에서 관리하고 우리는 이용료를 내고 간편하게 그 선을 이용하는 것입니다. 이 ISP의 선을 이용하는 거대한 규모의 망이 WAN이라 할 수 있습니다.   


![wanlan](https://user-images.githubusercontent.com/33653318/42171450-48ec7444-7e54-11e8-8148-9ec16655b844.png)



2계층에서는 LAN과 WAN을 구분해서 생각해야합니다. 둘에게 적용되는 프로토콜이 다릅니다. LAN은 이더넷(Ethernet) 프로토콜을 사용합니다. 이더넷에 대해 알아봐요.

### 이더넷은 무슨 규칙을 정할까?

정보를 보내려는 컴퓨터에서 수신할 컴퓨터가 망 내에 몇 번 컴퓨터인지를 알려줄 필요가  생겼습니다. 이더넷에서는 망 내 몇 번 컴퓨터인가? 를 나타내는 주소 정보를 추가합니다. 이 주소는 MAC(Media Access Control)주소라고 부릅니다. 정확히 말하자면 컴퓨터가 아니라, 컴퓨터에 연결된 인터페이스에 MAC주소가 각각 할당됩니다. 

정리해보면 LAN규모의 망일 경우, 2계층에서는 3,4단계에서 넘어온 정보에 MAC주소를 추가합니다. 이런 방식으로 단계가 지날 수록 원래 보내려던 정보에  다른 정보가 더해지는 것이 TCP/IP모델입니다.  

정보는 LAN내 모든 컴퓨터로 전송이되고 MAC주소를 읽어서 해당되는 컴퓨터만 정보를 받고, 나머지 컴퓨터들은 자신의 MAC주소가 아니라면 파기합니다. (정보가 수신하는 컴퓨터에만 전달되는 것이 아닙니다.) 이런 방식을 사용하는 이유는 MAC주소는 컴퓨터의 위치에 해당하는 정보를 갖는 것 아니기 때문입니다. 주소라는 말을 써서 위치라고 헷갈릴수 있습니다. 하지만, MAC주소는 그냥 망 내 컴퓨터 번호라고 생각하면 쉬울 것 같습니다. 그리고, 네트워크는 망 내 번호만으로는 각 컴퓨터의 위치를 알지 못한다고 생각합시다.

### CSMA/CD

위와 같이 모든 컴퓨터에 전송하기에 문제가 발생합니다. 동시에 여러 컴퓨터가 전송을 한다면 신호가 겹쳐 충돌이 발생할 수 있습니다. 이를 해결하는 것이 CSMA/CD 라는 충돌검사입니다. CSMA/CD는 지금 다른 컴퓨터가 전송 중인지 아닌지를 확인해서 겹치지 않게 조절해줍니다. 

### 스위치

컴퓨터 수가 많아지면 CSMA/CD는 신호를 대기하는 시간이 길어지게 됩니다. 신호가 충돌하는 것을 막기위한 다른 방법으로 스위치가 있습니다. 이 기기는 각 컴퓨터로 연결되는 길을 구분해 MAC주소에 해당되는 길로만 정보를 보내게 해줍니다. 주의해야할 것은 스위치도 수신하는 컴퓨터의 주소를 알려주는 것이 아닙니다. 스위치는 망 내 모든 컴퓨터로 신호를 한번 보낸 뒤 컴퓨터 별로 MAC주소를 기억합니다. 그 기억을 바탕으로 MAC주소에 해당하는 길로 보냅니다.  

![2](https://user-images.githubusercontent.com/33653318/42171462-500aec1a-7e54-11e8-97fe-81d2c3026e74.png)

